<div ng-form="innerForm" ng-click="enterEditMode()">
    &nbsp;<span ng-show="!editMode" ng-click="enterEditMode()" translate="{{((params.value === '' || params.value === null || angular.isUndefined(params.value)) ? 'SELECT_NO_OPTIONS' : getLabel(params.value))}}"></span>

  <i class="edit fa fa-pencil-square" ng-show="!editMode" ng-click="enterEditMode()" ng-focus="enterEditMode()" tabindex="{{ params.tabindex }}"></i>
  <i class="saved fa fa-check" ng-show="!editMode" ng-class="{ active: params.saved }"></i>

  <div class="editable-select" ng-show="editMode">

    <!-- Try to translate drop-down values by default -->
    <div ng-if="params.translatable !== false">

      <!-- Sort options if order is not explicitly defined. -->
      <select chosen pre-select-from="collection"
              ng-model="params.value"
              ng-if="!ordered"
              name="{{ params.name }}"
              ng-change="submit()"
              ng-blur="leaveEditMode()"
              ng-required="params.required"
              tabindex="{{ params.tabindex }}"
              data-width="'250px'"
              ng-options="option.value as option.label|translate for option in collection|orderBy: 'label|translate'">
        <option value="" ng-selected="params.value === ''" ng-if="!params.required">-- {{ 'SELECT_NO_OPTIONS' | translate | limitTo : 70 }} --</option>
      </select>

      <!-- Do not sort options if order is explicitly defined. -->
      <select chosen pre-select-from="collection"
              ng-model="params.value"
              ng-if="ordered"
              name="{{ params.name }}"
              ng-change="submit()"
              ng-blur="leaveEditMode()"
              ng-required="params.required"
              tabindex="{{ params.tabindex }}"
              data-width="'250px'"
              ng-options="option.value as option.label|translate for option in collection">
        <option value="" ng-selected="params.value === ''" ng-if="!params.required">-- {{ 'SELECT_NO_OPTIONS' | translate | limitTo : 70 }} --</option>
      </select>

    </div>

    <!-- Do not translate if explicitly disabled -->
    <div ng-if="params.translatable === false">

      <!-- Sort options if order is not explicitly defined. -->
      <select chosen pre-select-from="collection"
              ng-model="params.value"
              ng-if="!ordered"
              name="{{ params.name }}"
              ng-change="submit()"
              ng-blur="leaveEditMode()"
              ng-required="params.required"
              tabindex="{{ params.tabindex }}"
              data-width="'250px'"
              ng-options="option.value as option.label for option in collection|orderBy: 'label'">
        <option value="" ng-selected="params.value === ''" ng-if="!params.required">-- {{ 'SELECT_NO_OPTIONS' | translate | limitTo : 70 }} --</option>
      </select>

      <!-- Do not sort options if order is explicitly defined. -->
      <select chosen pre-select-from="collection"
              ng-model="params.value"
              ng-if="ordered"
              name="{{ params.name }}"
              ng-change="submit()"
              ng-blur="leaveEditMode()"
              ng-required="params.required"
              tabindex="{{ params.tabindex }}"
              data-width="'250px'"
              ng-options="option.value as option.label for option in collection">
        <option value="" ng-selected="params.value === ''" ng-if="!params.required">-- {{ 'SELECT_NO_OPTIONS' | translate | limitTo : 70 }} --</option>
      </select>
    </div>
  </div>
</div>

